{% extends 'base_public.html' %}

{% block content %}
<div class="container">
    <div class="row justify-content-center align-items-center min-vh-100" style="margin-top: -80px;">
        <div class="col-md-5 col-lg-4">
            <div class="text-center mb-4 animate__animated animate__fadeInDown">
                <h1 class="fw-bold h3 mb-2">Verify & Reset</h1>
                <p class="text-muted small">Enter the code sent to your email to update your password.</p>
            </div>

            <div class="card border-0 shadow-sm p-4 p-md-5 animate__animated animate__fadeInUp">
                <form method="post" action="{% url 'password_reset_verify' %}">
                    {% csrf_token %}

                    <div class="mb-3">
                        <label class="form-label fw-bold small text-muted">USERNAME</label>
                        <input type="text" name="username" class="form-control bg-light border-0 shadow-none py-2" placeholder="Your username" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold small text-muted">6-DIGIT OTP</label>
                        <input type="text" name="otp" class="form-control bg-light border-0 shadow-none py-2 text-center fw-bold letter-spacing-lg" placeholder="· · · · · ·" maxlength="6" required>
                    </div>

                    <div class="mb-4">
                        <label class="form-label fw-bold small text-muted">NEW PASSWORD</label>
                        <input type="password" name="new_password" class="form-control bg-light border-0 shadow-none py-2" placeholder="••••••••" required>
                    </div>

                    <button type="submit" class="btn btn-primary w-100 py-3 fw-bold rounded-3 shadow-lg mb-3">
                        Update Password
                    </button>
                </form>

                <div class="text-center">
                    <p class="small text-muted mb-0">Didn't get the code?</p>
                    <a href="{% url 'forgot_password' %}" class="small text-decoration-none text-primary fw-bold">Resend OTP</a>
                </div>
            </div>

            <div class="text-center mt-4">
                <a href="{% url 'login' %}" class="text-decoration-none text-muted small">
                    <i class="bi bi-arrow-left"></i> Back to Login
                </a>
            </div>
        </div>
    </div>
</div>

<style>
    /* Styling for the OTP input to look better */
    .letter-spacing-lg {
        letter-spacing: 0.5rem;
        font-size: 1.2rem;
    }
    .form-control:focus {
        background-color: #fff !important;
        border: 1px solid #0d6efd !important;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.1) !important;
    }
</style>
{% endblock %}