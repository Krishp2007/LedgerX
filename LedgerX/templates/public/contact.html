{% extends 'base_public.html' %}
{% block title %}Contact Us | LedgerX{% endblock %}

{% block extra_css %}
<style>

/* ===== PAGE LOAD ANIMATION ===== */
.page-load {
  opacity: 0;
  transform: translateY(20px);
  animation: pageFadeUp 0.8s ease-out forwards;
}

@keyframes pageFadeUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.page-delay-1 { animation-delay: .15s; }
.page-delay-2 { animation-delay: .3s; }

/* ===== CONTACT HERO ===== */
.contact-hero {
  padding: 6rem 0 5rem;
  background:
    radial-gradient(circle at 80% 20%, rgba(16,185,129,.25), transparent),
    #fff;
  text-align: center;
}

.contact-hero h1 {
  font-size: clamp(1.9rem, 4.5vw, 2.8rem);
  font-weight: 800;
}

.contact-hero p {
  max-width: 650px;
  margin: 1rem auto 0;
  color: #4b5563;
  font-size: clamp(0.95rem, 2.8vw, 1.05rem);
}

/* ===== CONTACT SECTION ===== */
.contact-section {
  padding: 3.5rem 0;
}

.contact-wrapper {
  max-width: 1000px;
  margin: 0 auto;
}

/* ===== CONTACT INFO ===== */
.contact-info {
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.contact-info > div {
  margin-bottom: 1.2rem;
}

.contact-info p {
  margin-bottom: 0;
  font-size: 0.9rem;
}

/* ===== FORM ===== */
.contact-form {
  background: #fff;
  border-radius: 32px;
  padding: 2.4rem;
  box-shadow: 0 30px 70px rgba(0,0,0,.08);
}

.contact-form h4 {
  font-size: 1.25rem;
}

.form-label {
  font-size: 0.8rem;
  letter-spacing: 0.5px;
}

.form-control {
  background: #f9fafb;
  border-radius: 14px;
  border: none;
  padding: 0.85rem 1rem;
  font-size: 0.95rem;
}

.form-control:focus {
  background: #fff;
  box-shadow: 0 0 0 .2rem rgba(16,185,129,.15);
}

/* ===== INLINE VALIDATION ===== */
.error-text {
  display: none;
  color: #dc2626;
  font-size: 0.75rem;
  margin-top: 0.35rem;
}

.form-control.error {
  border: 1.5px solid #dc2626;
  background: #fff5f5;
}

.form-control.success {
  border: 1.5px solid #16a34a;
  background: #f0fdf4;
}

/* ===== SUCCESS MESSAGE ===== */
.form-success {
  display: none;
  background: #f0fdf4;
  color: #065f46;
  padding: 0.9rem 1rem;
  border-radius: 12px;
  font-size: 0.9rem;
  margin-bottom: 1.2rem;
  animation: fadeInSuccess 0.4s ease;
}

@keyframes fadeInSuccess {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ===== SUBMIT BUTTON ===== */
.btn-submit {
  background: linear-gradient(135deg,#10b981,#059669);
  color: #fff;
  border-radius: 16px;
  padding: 0.95rem;
  font-weight: 600;
  min-height: 48px;
  transition: .3s ease;
  font-size: 0.95rem;
}

.btn-submit:hover {
  transform: translateY(-3px);
  box-shadow: 0 16px 40px rgba(16,185,129,.35);
}

/* ===== MOBILE + TABLET ===== */
@media (max-width: 991px) {

  .contact-hero {
    padding: 4.5rem 0 4rem;
  }

  .contact-section {
    padding: 3rem 0;
  }

  .contact-info {
    align-items: center;
    text-align: center;
    margin-bottom: 1.5rem;
  }

  .contact-info > div {
    margin-bottom: 1rem;
  }

  .contact-form {
    padding: 2rem 1.6rem;
    border-radius: 24px;
  }
}

</style>
{% endblock %}

{% block content %}

<!-- HERO -->
<section class="contact-hero page-load">
  <div class="container">
    <span class="fw-bold text-success">CONTACT LEDGERX</span>
    <h1 class="mt-3">
      Let‚Äôs Talk About<br>
      <span class="gradient-text">Your Business</span>
    </h1>
    <p>
      Have questions, feedback, or need support?
      Our team is here to help you.
    </p>
  </div>
</section>

<!-- CONTACT MAIN -->
<section class="contact-section page-load page-delay-1">
  <div class="container">
    <div class="contact-wrapper">
      <div class="row g-5 align-items-center">

        <!-- LEFT INFO -->
        <div class="col-lg-4 contact-info">
          <div>
            <h5 class="fw-bold">Contact Information</h5>
            <p class="text-muted small">Reach out to us directly</p>
          </div>

          <div>
            <div class="fw-semibold">üìß Email</div>
            <p class="text-muted small">ledgerx.team@gmail.com</p>
          </div>

          <div>
            <div class="fw-semibold">üìû Phone</div>
            <p class="text-muted small">+91 90817 38236</p>
          </div>

          <div>
            <div class="fw-semibold">üìç Location</div>
            <p class="text-muted small">Ahmedabad, Gujarat</p>
          </div>
        </div>

        <!-- FORM -->
        <div class="col-lg-8 page-load page-delay-2">
          <div class="contact-form">

            <!-- SUCCESS MESSAGE -->
            <div class="form-success" id="formSuccess">
              ‚úÖ Your message has been sent successfully. We‚Äôll contact you soon.
            </div>

            <h4 class="fw-bold mb-4">Send Us a Message</h4>

            <form id="contactForm" >
              {% csrf_token %}

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label fw-semibold">Your Name</label>
                  <input class="form-control" id="name" name="name" required>
                  <small class="error-text">Name is required</small>
                </div>

                <div class="col-md-6 mb-3">
                  <label class="form-label fw-semibold">Email Address</label>
                  <input type="email" class="form-control" id="email" name="email" required>
                  <small class="error-text">Enter a valid email address</small>
                </div>
              </div>

              <div class="mb-4">
                <label class="form-label fw-semibold">Message</label>
                <textarea rows="5" class="form-control" id="message" name="message" required></textarea>
                <small class="error-text">Message cannot be empty</small>
              </div>

              <button type="submit" class="btn btn-submit w-100" id="submitBtn">
                Send Message ‚Üí
              </button>
            </form>

          </div>
        </div>

      </div>
    </div>
  </div>
</section>


<script>
const form = document.getElementById("contactForm");
const successBox = document.getElementById("formSuccess");
const btn = document.getElementById("submitBtn");

function showError(input, message) {
  input.classList.add("error");
  input.classList.remove("success");
  input.nextElementSibling.style.display = "block";
  input.nextElementSibling.innerText = message;
}

function showSuccess(input) {
  input.classList.remove("error");
  input.classList.add("success");
  input.nextElementSibling.style.display = "none";
}

form.addEventListener("submit", async function (e) {
  e.preventDefault(); // üö´ stop page reload

  const name = document.getElementById("name");
  const email = document.getElementById("email");
  const message = document.getElementById("message");

  let valid = true;

  if (name.value.trim() === "") {
    showError(name, "Name is required");
    valid = false;
  } else showSuccess(name);

  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailRegex.test(email.value)) {
    showError(email, "Enter a valid email");
    valid = false;
  } else showSuccess(email);

  if (message.value.trim() === "") {
    showError(message, "Message cannot be empty");
    valid = false;
  } else showSuccess(message);

  if (!valid) return;

  // üîÑ Sending state
  btn.innerHTML = "Sending‚Ä¶";
  btn.disabled = true;

  const formData = new FormData();
  formData.append("name", name.value);
  formData.append("email", email.value);
  formData.append("message", message.value);

  // ‚è≥ simulate 1‚Äì2 sec delay (better UX)
  await new Promise(res => setTimeout(res, 1000));

  try {
    const response = await fetch("{% url 'contact_ajax' %}", {
      method: "POST",
      headers: {
        "X-CSRFToken": "{{ csrf_token }}",
      },
      body: formData
    });

    const data = await response.json();

    if (data.success) {
      successBox.style.display = "block";
      form.reset();

      name.classList.remove("success");
      email.classList.remove("success");
      message.classList.remove("success");

    } else {
      alert("Something went wrong. Please try again.");
    }
  } catch (err) {
    alert("Server error. Please try later.");
  }

  btn.innerHTML = "Send Message ‚Üí";
  btn.disabled = false;
});
</script>
{% endblock %}
